jQuery(document).ready(function(e){"use strict";var t=e('form[name="checkout"]').find("p.form-row input, p.form-row textarea"),i=function(t){var i=e("#billing_country");if("undefined"==typeof checkVATNumber||!i.length||!ywccp_front.vat_validation_enabled)return!0;var r=t.substr(0,2).toUpperCase(),a=i.val();return r!==a&&(t=a+t),checkVATNumber(a,t)},r=function(e,t){e.next(".ywccp_error").length||e.after('<span class="ywccp_error"></span>'),e.next(".ywccp_error").html(t)};t.length&&e.each(t,function(){var t=e(this),a=t.data("tooltip"),n=t.closest("p.form-row");t.on("blur",function(){var a,o=e(this),c=o.val(),s="";ywccp_front.validation_enabled&&(!c&&n.hasClass("validate-required")?r(o,s=ywccp_front.err_msg):c&&n.hasClass("validate-vat")&&!i(c)?r(o,ywccp_front.err_msg_vat):c&&n.hasClass("validate-email")&&(a=c,!/^([\w-]+(?:\.[\w-]+)*)(\+?)([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(a))?r(o,ywccp_front.err_msg_mail):t.next(".ywccp_error").remove())}),void 0!==a&&""!=a&&void 0!==e.fn.qtip&&t.qtip({content:{text:a},show:{event:"focus"},style:{classes:"ywccp_tooltip"},position:{my:"bottom center",at:"top center",viewport:e(window)}})});var a=e(".ywccp-multiselect-type, select.select"),n=e(".ywccp-datepicker-type"),o=e(".ywccp-timepicker-type");a&&void 0!==e.fn.select2&&e.each(a,function(){var t=e(this);!e("#s2id_"+t.attr("id")).length&&t.select2({placeholder:t.data("placeholder")})}),void 0!==e.fn.datepicker&&n&&e.each(n,function(){e(this).datepicker({dateFormat:e(this).data("format")||"dd-mm-yy",changeYear:ywccp_front.datepicker_change_year,changeMonth:ywccp_front.datepicker_change_month,yearRange:ywccp_front.datepicker_year_range,minDate:ywccp_front.datepicker_min_date,maxDate:ywccp_front.datepicker_max_date,beforeShow:function(){setTimeout(function(t){e("#ui-datepicker-div").wrap('<div class="yith_datepicker"></div>').css("z-index",99999999999999),e("#ui-datepicker-div").show()},0)},beforeShowDay:function(e){return ywccp_front.datepicker_allowed_days.includes(e.getDay())?[!0]:[!1]},onClose:function(){e("#ui-datepicker-div").hide(),e("#ui-datepicker-div").unwrap()}})}),void 0!==e.fn.timepicki&&o&&(e.each(o,function(){e(this).timepicki({reset:!0,disable_keyboard_mobile:!0,show_meridian:ywccp_front.time_format,max_hour_value:ywccp_front.time_format?"12":"23",min_hour_value:ywccp_front.time_format?"1":"0",overflow_minutes:!0,increase_direction:"up"})}),e(document).on("click",".reset_time",function(e){e.preventDefault()}));var c=function(t){var i=null,r=e("*[name="+t+"]");return r.length>1?s(r):"checkbox"==r.attr("type")?r.is(":checked"):"radio"==r.attr("type")?e("#"+t+":checked").val():r.val()},s=function(e){var t=null;return e.each(function(i){if("radio"==e[i].type&&e[i].checked)return t=e[i].value,!1}),t},d=function(e){var t=e.input_name,i=e.type,r=(e.action,e.required,e.value),a=c(t),n=!1;switch(i){case"is-set":a&&(n=!0);break;case"is-empty":a||(n=!0);break;case"has-value":var o=r.split(",");jQuery.each(o,function(e,t){String(a)==String(t)&&(n=!0)});break;case"has-not-value":a!=r&&(n=!0)}return n},l=function(e){var t,i=(t=e,jQuery.parseJSON(ywccp_front.conditions)[t]);if(void 0===i||0===i.length)return null;for(var r=i.length,a={show:null,hide:null,set_required:null},n=0;n<r;n++){var o=i[n],c=d(o),s=o.action,l=o.required,h=o.wc_required;"products"!=o.input_name?"show"===s&&"no"!=a.show?c?(1==l&&(a.set_required="yes"),a.show="yes",a.hide="no"):(a.show="no",a.set_required="no",a.hide="yes"):"hide"===s&&"no"!=a.hide&&(c?(a.hide="yes",a.show="no"):(a.hide="no",a.show="yes")):1==l?(a.set_required="yes",a.show="yes"):h&&(a.set_required="yes",a.show="yes")}return a};e(ywccp_front.form_checkout_selector).on("change","input, select",function(e){h(e)}),e(ywccp_front.form_checkout_selector).on("submit",function(e){h(e)}),e(document.body).on("yith_wccp_i18n_locale_done",function(e){h(e)});var h=function(t){e(ywccp_front.form_checkout_selector).find("input, textarea, select, h3[data-name]").each(function(){var i=e(this).attr("name")||e(this).attr("data-name"),r=e(this).closest(".form-row").length?e(this).closest(".form-row"):e(this),a=l(i),n=!1;null!=a&&("yes"==a.show?(r.show(),"yes"==a.set_required&&(n=!0)):"yes"==a.hide&&r.hide(),u(t.type,r,n))})},u=function(e,t,i){!0==i?(t.addClass("validate-required"),0==t.find("label").find("abbr.required").length&&(t.find("label").find(".optional").remove(),t.find("label").append('<abbr class="required" title="required">*</abbr>'))):(t.removeClass("validate-required woocommerce-validated woocommerce-invalid woocommerce-invalid-required-field"),0==t.find("label").find(".optional").length&&(t.find("label").append('<span class="optional">(optional)</span>'),t.find("abbr.required").remove()))};if(e(ywccp_front.form_checkout_selector).find("input, select").each(function(){let t=ywccp_front.field_ids_to_exclude,i=e(this).attr("id");e.isArray(t)&&0>e.inArray(i,t,0)&&e(this).trigger("change")}),ywccp_front.ship_different_address_old_behaviour){var p=e("#ship-to-different-address-checkbox").is(":checked");e(".woocommerce-shipping-fields__field-wrapper").hide(),e(document.body).on("init_checkout",function(){e("#ship-to-different-address-checkbox").prop("checked",p).change(),e(".woocommerce-shipping-fields__field-wrapper").toggle(!0)})}});